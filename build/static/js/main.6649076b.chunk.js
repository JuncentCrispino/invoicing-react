(this["webpackJsonpbluehive-test-app-frontend"]=this["webpackJsonpbluehive-test-app-frontend"]||[]).push([[0],{54:function(e,t,n){},72:function(e,t,n){"use strict";n.r(t);var c=n(0),a=n.n(c),s=n(23),i=n.n(s),r=n(7),o=(n(53),n(54),n(10)),l=n(8),j=a.a.createContext(),u=j.Provider,d=j,b=n(81),h=n(82),m=n(1);function x(){var e=Object(c.useContext)(d),t=e.user,n=e.unsetUser,a=Object(l.g)(),s=t.id?Object(m.jsxs)(m.Fragment,{children:[Object(m.jsx)(o.b,{className:"nav-link",to:"/invoices",children:"Invoices"}),Object(m.jsx)(b.a.Link,{onClick:function(){n(),a.push("/login")},children:"Logout"})]}):Object(m.jsxs)(m.Fragment,{children:[Object(m.jsx)(o.b,{className:"nav-link",to:"/register",children:"Register"}),Object(m.jsx)(o.b,{className:"nav-link",to:"/login",children:"Log In"})]});return Object(m.jsxs)(h.a,{expand:"lg",className:"nav-bar",children:[Object(m.jsx)(o.b,{className:"navbar-brand",to:"/",children:"App"}),Object(m.jsx)(h.a.Toggle,{"aria-controls":"basic-navbar-nav"}),Object(m.jsxs)(h.a.Collapse,{id:"basic-navbar-nav",children:[Object(m.jsx)(b.a,{className:"mr-auto",children:Object(m.jsx)(o.b,{className:"nav-link",to:"/",children:"Home"})}),Object(m.jsx)(b.a,{children:s})]})]})}var O=n(74);function p(e){var t=e.bannerProps,n=t.title,a=t.content,s=t.destination,i=t.label,r=Object(c.useContext)(d).user;return Object(m.jsxs)(O.a,{style:{paddingTop:"100px"},children:[Object(m.jsx)("h1",{children:n}),Object(m.jsx)("p",{children:a}),null!=r.id?Object(m.jsx)(m.Fragment,{children:Object(m.jsx)(o.b,{className:"btn homebtn",to:"/invoices",children:"Create Invoice"})}):Object(m.jsx)(m.Fragment,{children:Object(m.jsx)(o.b,{className:"btn homebtn",to:s,children:i})})]})}var v=n(75),f=n(47);function g(){return Object(m.jsxs)(v.a,{children:[Object(m.jsx)(f.a,{xs:12,md:4,className:"mb-3",children:Object(m.jsx)("div",{className:"card-highlight",children:Object(m.jsxs)("div",{children:[Object(m.jsx)("h5",{children:"Heading 1"}),Object(m.jsx)("hr",{className:"hr-highlight"}),Object(m.jsx)("div",{children:"Lorem ipsum dolor sit amet consectetur adipisicing elit. Nam consequuntur ea, animi, rem voluptate voluptas provident quasi alias laborum optio ad soluta molestiae. Non mollitia praesentium distinctio? Ab, quaerat ea."})]})})}),Object(m.jsx)(f.a,{xs:12,md:4,className:"mb-3",children:Object(m.jsx)("div",{className:"card-highlight",children:Object(m.jsxs)("div",{children:[Object(m.jsx)("h5",{children:"Heading 2"}),Object(m.jsx)("hr",{className:"hr-highlight"}),Object(m.jsx)("div",{children:"Lorem ipsum dolor sit amet consectetur adipisicing elit. Nam consequuntur ea, animi, rem voluptate voluptas provident quasi alias laborum optio ad soluta molestiae. Non mollitia praesentium distinctio? Ab, quaerat ea."})]})})}),Object(m.jsx)(f.a,{xs:12,md:4,className:"mb-3",children:Object(m.jsx)("div",{className:"card-highlight",children:Object(m.jsxs)("div",{children:[Object(m.jsx)("h5",{children:"Heading 3"}),Object(m.jsx)("hr",{className:"hr-highlight"}),Object(m.jsx)("div",{children:"Lorem ipsum dolor sit amet consectetur adipisicing elit. Nam consequuntur ea, animi, rem voluptate voluptas provident quasi alias laborum optio ad soluta molestiae. Non mollitia praesentium distinctio? Ab, quaerat ea."})]})})})]})}var N=n(76);function y(){return Object(m.jsxs)("div",{children:[Object(m.jsx)(p,{bannerProps:{title:"Invoice Database Web App",content:"Free For All and No Advertisements!",destination:"/register",label:"Signup Now!"}}),Object(m.jsx)(N.a,{children:Object(m.jsx)(g,{})})]})}var C=n(80),S=n(77),I=n(16),P=n.n(I);function A(){var e=Object(l.g)(),t=Object(c.useContext)(d).user,n=Object(c.useState)(""),a=Object(r.a)(n,2),s=a[0],i=a[1],j=Object(c.useState)(""),u=Object(r.a)(j,2),b=u[0],h=u[1],x=Object(c.useState)(""),O=Object(r.a)(x,2),p=O[0],v=O[1],f=Object(c.useState)(""),g=Object(r.a)(f,2),y=g[0],I=g[1],A=Object(c.useState)(""),L=Object(r.a)(A,2),q=L[0],k=L[1],w=Object(c.useState)(!1),G=Object(r.a)(w,2),E=G[0],D=G[1];function T(t){t.preventDefault(),fetch("".concat("https://api-invoice.centapps.online","/users/checkEmail"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:s})}).then((function(e){return e.json()})).then((function(t){!1===t?(fetch("".concat("https://api-invoice.centapps.online","/users/register"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({firstName:y,lastName:q,email:s,password:b})}).then((function(e){return e.json()})).then((function(e){!0===e?P.a.fire({title:"Success",icon:"success",text:"Registered Successfully"}):P.a.fire({title:"Error",icon:"error",text:"Check your details and try again"})})),e.push("/login")):P.a.fire({title:"Error",icon:"error",text:"Email already exist, Please use other email insted."})}))}return Object(c.useEffect)((function(){D(""!==y&&""!==q&&""!==b&&""!==s&&b===p)}),[s,b,p,y,q]),null!=t.id?Object(m.jsx)(l.a,{to:"/"}):Object(m.jsx)(N.a,{className:"auth-container",children:Object(m.jsxs)("div",{className:"div-form",children:[Object(m.jsxs)(C.a,{className:"mt-3",onSubmit:function(e){return T(e)},children:[Object(m.jsxs)(C.a.Group,{children:[Object(m.jsx)(C.a.Label,{className:"text-sm",children:"First Name"}),Object(m.jsx)(C.a.Control,{className:"text-sm",type:"text",placeholder:"Enter First Name",value:y,onChange:function(e){return I(e.target.value)},required:!0})]}),Object(m.jsxs)(C.a.Group,{children:[Object(m.jsx)(C.a.Label,{className:"text-sm",children:"Last Name"}),Object(m.jsx)(C.a.Control,{className:"text-sm",type:"text",placeholder:"Enter Last Name",value:q,onChange:function(e){return k(e.target.value)},required:!0})]}),Object(m.jsxs)(C.a.Group,{children:[Object(m.jsx)(C.a.Label,{className:"text-sm",children:"Email Address"}),Object(m.jsx)(C.a.Control,{className:"text-sm",type:"email",placeholder:"Enter email",value:s,onChange:function(e){return i(e.target.value)},required:!0}),Object(m.jsx)(C.a.Text,{className:"text-muted",children:"We'll Never share your email with anyone else"})]}),Object(m.jsxs)(C.a.Group,{children:[Object(m.jsx)(C.a.Label,{className:"text-sm",children:"Password"}),Object(m.jsx)(C.a.Control,{className:"text-sm",type:"password",placeholder:"Enter Password",value:b,onChange:function(e){return h(e.target.value)},required:!0})]}),Object(m.jsxs)(C.a.Group,{children:[Object(m.jsx)(C.a.Label,{className:"text-sm",children:"Verify Password:"}),Object(m.jsx)(C.a.Control,{className:"text-sm",type:"password",placeholder:"Verify Password",value:p,onChange:function(e){return v(e.target.value)},required:!0})]}),E?Object(m.jsx)(S.a,{variant:"info",type:"submit",size:"sm",children:Object(m.jsx)("b",{children:"Submit"})}):Object(m.jsx)(S.a,{variant:"danger",type:"submit",size:"sm",disabled:!0,children:"Submit"})]}),Object(m.jsxs)("div",{className:"text-muted small mt-4",children:[Object(m.jsx)("span",{children:"Aleady have an account? "}),Object(m.jsx)("span",{children:Object(m.jsx)(o.b,{className:"text-info",to:"/login",children:"Click Here"})})]})]})})}function L(){var e=Object(c.useState)(""),t=Object(r.a)(e,2),n=t[0],a=t[1],s=Object(c.useState)(""),i=Object(r.a)(s,2),j=i[0],u=i[1],b=Object(c.useContext)(d),h=b.user,x=b.setUser,O=Object(c.useState)(!1),p=Object(r.a)(O,2),v=p[0],f=p[1];var g=function(e){fetch("".concat("https://api-invoice.centapps.online","/users/details"),{headers:{Authorization:"Bearer ".concat(e)}}).then((function(e){return e.json()})).then((function(e){x({id:e._id,isAdmin:e.isAdmin})}))};return Object(c.useEffect)((function(){f(""!==n&&""!==j)}),[n,j]),null!=h.id?Object(m.jsx)(l.a,{to:"/"}):Object(m.jsx)(N.a,{className:"auth-container",children:Object(m.jsxs)("div",{className:"div-form",children:[Object(m.jsxs)(C.a,{className:"mt-3",onSubmit:function(e){return function(e){e.preventDefault(),fetch("".concat("https://api-invoice.centapps.online","/users/login"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:n,password:j})}).then((function(e){return e.json()})).then((function(e){"undefined"!==typeof e.access?(localStorage.setItem("token",e.access),g(e.access)):P.a.fire({title:"Authentication failed",icon:"error",text:"Check your login details and try again"})}))}(e)},children:[Object(m.jsxs)(C.a.Group,{children:[Object(m.jsx)(C.a.Label,{className:"text-sm",children:"Email Address"}),Object(m.jsx)(C.a.Control,{className:"text-sm",type:"email",placeholder:"john@example@email.com",size:"sm",value:n,onChange:function(e){return a(e.target.value)},required:!0})]}),Object(m.jsxs)(C.a.Group,{children:[Object(m.jsx)(C.a.Label,{className:"text-sm",children:"Password"}),Object(m.jsx)(C.a.Control,{className:"text-sm",type:"password",placeholder:"Enter Password",size:"sm",value:j,onChange:function(e){return u(e.target.value)},required:!0})]}),v?Object(m.jsx)(S.a,{variant:"info",type:"submit",size:"sm",children:Object(m.jsx)("b",{children:"Login"})}):Object(m.jsx)(S.a,{variant:"danger",type:"submit",size:"sm",disabled:!0,children:"Login"})]}),Object(m.jsxs)("div",{className:"text-muted small mt-4",children:[Object(m.jsx)("span",{children:"Don't have an account Yet? "}),Object(m.jsx)("span",{children:Object(m.jsx)(o.b,{className:"text-info",to:"/register",children:"Click Here"})})]})]})})}var q=n(78),k=n(79);function w(){var e=Object(c.useState)([]),t=Object(r.a)(e,2),n=t[0],a=t[1],s=Object(c.useState)([]),i=Object(r.a)(s,2),o=i[0],l=i[1],j=Object(c.useState)(""),u=Object(r.a)(j,2),d=u[0],b=u[1],h=Object(c.useState)(""),x=Object(r.a)(h,2),O=x[0],p=x[1],v=Object(c.useState)(""),f=Object(r.a)(v,2),g=f[0],y=f[1],I=Object(c.useState)(""),A=Object(r.a)(I,2),L=A[0],w=A[1],G=Object(c.useState)(""),E=Object(r.a)(G,2),D=E[0],T=E[1],z=Object(c.useState)(""),B=Object(r.a)(z,2),H=B[0],F=B[1],Q=Object(c.useState)(""),_=Object(r.a)(Q,2),J=_[0],U=_[1],R=Object(c.useState)(!1),V=Object(r.a)(R,2),W=V[0],Y=V[1],K=Object(c.useState)(!1),M=Object(r.a)(K,2),X=M[0],Z=M[1],$=Object(c.useState)(!1),ee=Object(r.a)($,2),te=ee[0],ne=ee[1],ce=function(){return Z(!1)},ae=function(){Y(!1),b(""),p(""),y(""),w(""),T(""),F(""),U("")},se=function(){fetch("".concat("https://api-invoice.centapps.online","/users/getAllInvoice"),{headers:{Authorization:"Bearer ".concat(localStorage.getItem("token"))}}).then((function(e){return e.json()})).then((function(e){a(e.invoice)}))};Object(c.useEffect)((function(){se()}),[]);return Object(c.useEffect)((function(){var e=n.map((function(e){return Object(m.jsxs)("tr",{children:[Object(m.jsx)("td",{children:e.invoiceNo}),Object(m.jsx)("td",{children:e.invoiceDate}),Object(m.jsx)("td",{children:e.customerName}),Object(m.jsx)("td",{children:e.productName}),Object(m.jsx)("td",{children:e.productQuantity}),Object(m.jsx)("td",{children:e.productPrice.toLocaleString()}),Object(m.jsx)("td",{children:e.totalInvoiceAmount.toLocaleString()}),Object(m.jsxs)("td",{className:"d-flex justify-content-center",children:[Object(m.jsx)(S.a,{className:"m-1",size:"sm",variant:"info",onClick:function(){return function(e){fetch("".concat("https://api-invoice.centapps.online","/users/getSpecificInvoice/").concat(e),{headers:{Authorization:"Bearer ".concat(localStorage.getItem("token"))}}).then((function(e){return e.json()})).then((function(e){console.log(e._id),b(e._id),p(e.invoiceNo),y(e.invoiceDate),w(e.customerName),T(e.productName),F(e.productQuantity),U(e.productPrice)})),Y(!0)}(e._id)},children:"Update"}),Object(m.jsx)(S.a,{className:"m-1",size:"sm",variant:"danger",onClick:function(){return t=e._id,b(t),void ne(!0);var t},children:"Delete"})]})]},e._id)}));l(e)}),[n]),Object(m.jsxs)(N.a,{style:{minHeight:400},children:[Object(m.jsxs)("div",{className:"text-center my-4",children:[Object(m.jsx)("h2",{children:"DashBoard"}),Object(m.jsx)("div",{className:"d-flex justify-content-center",children:Object(m.jsx)(S.a,{variant:"info",onClick:function(){return Z(!0)},children:"Add New Invoice"})})]}),Object(m.jsxs)(q.a,{striped:!0,bordered:!0,hover:!0,responsive:"sm",size:"sm",className:"small text-center",children:[Object(m.jsx)("thead",{children:Object(m.jsxs)("tr",{children:[Object(m.jsx)("th",{children:"Invoice No."}),Object(m.jsx)("th",{children:"Date"}),Object(m.jsx)("th",{children:"Customer Name"}),Object(m.jsx)("th",{children:"Product Name"}),Object(m.jsx)("th",{children:"Product Quantity"}),Object(m.jsx)("th",{children:"Product Price"}),Object(m.jsx)("th",{children:"Total Invoice Amount"}),Object(m.jsx)("th",{children:"Action"})]})}),Object(m.jsx)("tbody",{children:o})]}),Object(m.jsx)(k.a,{show:W,onHide:ae,children:Object(m.jsxs)(C.a,{onSubmit:function(e){return function(e){e.preventDefault(),fetch("".concat("https://api-invoice.centapps.online","/users/updateInvoice/").concat(d),{method:"POST",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(localStorage.getItem("token"))},body:JSON.stringify({invoiceNo:O,invoiceDate:g,customerName:L,productName:D,productQuantity:H,productPrice:J,totalInvoiceAmount:J*H})}).then((function(e){return e.json()})).then((function(e){!0===e?(ae(),P.a.fire({title:"Success",icon:"success",text:"Invoice updated successfully",timer:4e3}),se()):alert("failed")}))}(e)},children:[Object(m.jsx)(k.a.Header,{closeButton:!0,children:Object(m.jsx)(k.a.Title,{children:"Update Invoice"})}),Object(m.jsxs)(k.a.Body,{children:[Object(m.jsxs)(C.a.Group,{controlId:"invoiceNo",children:[Object(m.jsx)(C.a.Label,{className:"text-sm",children:"Invoice Number"}),Object(m.jsx)(C.a.Control,{className:"text-sm",type:"number",value:O,onChange:function(e){return p(e.target.value)},required:!0})]}),Object(m.jsxs)(C.a.Group,{controlId:"invoiceDate",children:[Object(m.jsx)(C.a.Label,{className:"text-sm",children:"Invoice Date"}),Object(m.jsx)(C.a.Control,{className:"text-sm",type:"string",value:g,onChange:function(e){return y(e.target.value)},required:!0})]}),Object(m.jsxs)(C.a.Group,{controlId:"customerName",children:[Object(m.jsx)(C.a.Label,{className:"text-sm",children:"Customer Name"}),Object(m.jsx)(C.a.Control,{className:"text-sm",type:"string",value:L,onChange:function(e){return w(e.target.value)},required:!0})]}),Object(m.jsxs)(C.a.Group,{controlId:"productName",children:[Object(m.jsx)(C.a.Label,{className:"text-sm",children:"Product Name"}),Object(m.jsx)(C.a.Control,{className:"text-sm",type:"string",value:D,onChange:function(e){return T(e.target.value)},required:!0})]}),Object(m.jsxs)(C.a.Group,{controlId:"productQuantity",children:[Object(m.jsx)(C.a.Label,{className:"text-sm",children:"Product Quantity"}),Object(m.jsx)(C.a.Control,{className:"text-sm",type:"number",value:H,onChange:function(e){return F(e.target.value)},required:!0})]}),Object(m.jsxs)(C.a.Group,{controlId:"productPrice",children:[Object(m.jsx)(C.a.Label,{className:"text-sm",children:"Product Price"}),Object(m.jsx)(C.a.Control,{className:"text-sm",type:"number",value:J,onChange:function(e){return U(e.target.value)},required:!0})]})]}),Object(m.jsxs)(k.a.Footer,{children:[Object(m.jsx)(S.a,{variant:"secondary",onClick:ae,children:"Cancel"}),Object(m.jsx)(S.a,{variant:"success",type:"submit",children:"Submit"})]})]})}),Object(m.jsx)(k.a,{show:X,onHide:ce,children:Object(m.jsxs)(C.a,{onSubmit:function(e){return function(e){e.preventDefault(),fetch("".concat("https://api-invoice.centapps.online","/users/createInvoice"),{method:"POST",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(localStorage.getItem("token"))},body:JSON.stringify({invoiceNo:O,invoiceDate:g,customerName:L,productName:D,productQuantity:H,productPrice:J,totalInvoiceAmount:J*H})}).then((function(e){return e.json()})).then((function(e){!0===e?(se(),ce(),ae(),P.a.fire({title:"Success",icon:"success",text:"Invoice created successfully",timer:4e3})):(se(),alert("failed"))}))}(e)},children:[Object(m.jsx)(k.a.Header,{closeButton:!0,children:Object(m.jsx)(k.a.Title,{children:"Add New Invoice"})}),Object(m.jsxs)(k.a.Body,{children:[Object(m.jsxs)(C.a.Group,{controlId:"invoiceNo",children:[Object(m.jsx)(C.a.Label,{className:"text-sm",children:"Invoice Number"}),Object(m.jsx)(C.a.Control,{className:"text-sm",type:"number",value:O,onChange:function(e){return p(e.target.value)},required:!0})]}),Object(m.jsxs)(C.a.Group,{controlId:"invoiceDate",children:[Object(m.jsx)(C.a.Label,{className:"text-sm",children:"Invoice Date"}),Object(m.jsx)(C.a.Control,{className:"text-sm",type:"string",value:g,onChange:function(e){return y(e.target.value)},required:!0})]}),Object(m.jsxs)(C.a.Group,{controlId:"customerName",children:[Object(m.jsx)(C.a.Label,{className:"text-sm",children:"Customer Name"}),Object(m.jsx)(C.a.Control,{className:"text-sm",type:"string",value:L,onChange:function(e){return w(e.target.value)},required:!0})]}),Object(m.jsxs)(C.a.Group,{controlId:"productName",children:[Object(m.jsx)(C.a.Label,{className:"text-sm",children:"Product Name"}),Object(m.jsx)(C.a.Control,{className:"text-sm",type:"string",value:D,onChange:function(e){return T(e.target.value)},required:!0})]}),Object(m.jsxs)(C.a.Group,{controlId:"productQuantity",children:[Object(m.jsx)(C.a.Label,{className:"text-sm",children:"Product Quantity"}),Object(m.jsx)(C.a.Control,{className:"text-sm",type:"number",value:H,onChange:function(e){return F(e.target.value)},required:!0})]}),Object(m.jsxs)(C.a.Group,{controlId:"productPrice",children:[Object(m.jsx)(C.a.Label,{className:"text-sm",children:"Product Price"}),Object(m.jsx)(C.a.Control,{className:"text-sm",type:"number",value:J,onChange:function(e){return U(e.target.value)},required:!0})]})]}),Object(m.jsxs)(k.a.Footer,{children:[Object(m.jsx)(S.a,{variant:"secondary",onClick:ce,children:"Cancel"}),Object(m.jsx)(S.a,{variant:"success",type:"submit",children:"Submit"})]})]})}),Object(m.jsxs)(k.a,{show:te,onHide:function(e){return ne(!1)},children:[Object(m.jsx)(k.a.Header,{children:Object(m.jsx)("h5",{children:Object(m.jsx)("b",{children:"Are you sure you want to delete the Invoice?"})})}),Object(m.jsxs)(k.a.Footer,{children:[Object(m.jsx)(S.a,{variant:"secondary",onClick:function(){return ne(!1)},children:"Cancel"}),Object(m.jsx)(S.a,{variant:"danger",onClick:function(){return function(e){console.log("hello"),fetch("".concat("https://api-invoice.centapps.online","/users/deleteInvoice/").concat(e),{method:"POST",headers:{Authorization:"Bearer ".concat(localStorage.getItem("token"))}}).then((function(e){return e.json()})).then((function(e){!0===e?(ne(!1),P.a.fire({title:"Success",icon:"success",text:"Invoice deleted successfully",timer:4e3}),se()):(ne(!1),P.a.fire({title:"Error",icon:"error",text:"Something went wrong please try again later",timer:4e3}))}))}(d)},children:"Proceed"})]})]})]})}function G(){var e=Object(c.useState)({id:null,isAdmin:null}),t=Object(r.a)(e,2),n=t[0],a=t[1];return Object(c.useEffect)((function(){console.log({api:"https://api-invoice.centapps.online"}),fetch("".concat("https://api-invoice.centapps.online","/users/details"),{headers:{Authorization:"Bearer ".concat(localStorage.getItem("token"))}}).then((function(e){return e.json()})).then((function(e){"undefined"!==typeof e._id?a({id:e._id,isAdmin:e.isAdmin}):a({id:null,isAdmin:null})}))}),[]),Object(m.jsx)(u,{value:{user:n,setUser:a,unsetUser:function(){localStorage.clear(),a({id:null,isAdmin:null})}},children:Object(m.jsxs)(o.a,{children:[Object(m.jsx)(x,{}),Object(m.jsxs)(l.d,{children:[Object(m.jsx)(l.b,{exact:!0,path:"/",component:y}),Object(m.jsx)(l.b,{exact:!0,path:"/register",component:A}),Object(m.jsx)(l.b,{exact:!0,path:"/login",component:L}),Object(m.jsx)(l.b,{exact:!0,path:"/invoices",component:w})]})]})})}i.a.render(Object(m.jsx)(m.Fragment,{children:Object(m.jsx)(G,{})}),document.getElementById("root"))}},[[72,1,2]]]);
//# sourceMappingURL=main.6649076b.chunk.js.map